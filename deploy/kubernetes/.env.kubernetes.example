# Kubernetes Deployment Configuration
# Copy this file to .env.kubernetes and update with your values

# Application hostname (without protocol)
export APP_HOSTNAME=app.example.com

# Docker image to deploy
export DOCKER_IMAGE=ghcr.io/open-service-portal/app-portal:latest

# Kubernetes cluster configuration (required)
# Get API URL for first cluster in kubeconfig: kubectl config view --minify -o jsonpath='{.clusters[0].cluster.server}'
export KUBERNETES_API_URL="$(kubectl config view --minify -o jsonpath='{.clusters[0].cluster.server}')"

# Get cluster name: kubectl config current-context
export KUBERNETES_CLUSTER_NAME="$(kubectl config current-context)"

# Get service account token: kubectl get secret backstage-k8s-sa-token -n default -o jsonpath='{.data.token}' | base64 -d
export KUBERNETES_SERVICE_ACCOUNT_TOKEN="$(kubectl get secret backstage-k8s-sa-token -n default -o jsonpath='{.data.token}' | base64 -d)"

# Optional: Override URLs if different from hostname
# export APP_BASE_URL=https://app.example.com
# export BACKEND_BASE_URL=https://api.example.com